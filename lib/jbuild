(jbuild_version 1)

(rule
 ((targets (flags))
  (action (with-stdout-to flags (run ${path:flags.ml})))))

(library
 ((name cmph)
  (public_name cmph)
  (modules (cmph util))
  (libraries (base stdio ctypes ctypes.foreign))
  (c_library_flags (:standard (:include flags) -lcmph))
  (preprocess (pps (ppx_sexp_conv ppx_driver.runner -no-check)))))
